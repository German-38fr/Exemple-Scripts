<!DOCTYPE html>
<html lang='fr'>
<title>read image From EveryWhere</title>
<head>
<meta charset='utf-8' >
</head>
<body>
<br><br>
Afficher une image présente n'importe où sur le disque dur !
<br><br><br>
Enjoy,
<br><br>
joyeux Noël à tous et à toutes...
<br><br>
German
<br><br>

<input id='totoalamaisonid' type='file' style='display:inline-block;position:relative;width:50%' />
<br><br>
<img id='monimageid' style='display:inline-block;position:relative;width:30%;height:auto' />
<br><br>
<div id='messageid' style='display:inline-block;position:relative;width:50%;height:auto' ></div>

<!-- /////////////////////// Section Javascript /////////////////////// -->
<script language='Javascript' type='text/javascript'>
	
//creation des éléments JS qui pointent vers les éléments du DOM
var totoalamaison = document.getElementById('totoalamaisonid') ;
var monimage = document.getElementById('monimageid') ;
var message = document.getElementById('messageid') ;

//fonction qui va lire la " propagation " de l'événement input car on a cliqué sur une image
function getImage(event) {

/* on aurait pu faire pareil avec FileReader à la place du Blob + URL
const reader = new FileReader();
  reader.addEventListener('load', (event) => {
    monimage.src = event.target.result;
  });
  reader.readAsDataURL(totoalamaison.files[0]);
*/

//on créé un Buffer même si le PC n'aime pas trop c'est mieux qu'une URL interminable ;
var monBlobBuffer = new Blob([totoalamaison.files[0]], { 
	
	type: totoalamaison.files[0].type //le type l'input nous le donne c'est cool		
	});

var urlimg = URL.createObjectURL(monBlobBuffer); //on a un Buffer, on construit une URL provisoire.

//on purge le system dans 6 secondes ! ça devrait suffir pour 100Mo d'image.
setTimeout(function() { URL.revokeObjectURL(monBlobBuffer) ; },6000) ; 

//préchargement d'image...la moitié du taff est fait.
monimage.src = urlimg ;
//l'image est chargée...
monimage.onload = function() { 
	
	//affiche...normalement on choisi une image !
	message.innerHTML = '<br>Taille du fichier en octet: '+totoalamaison.files[0].size+' octets' ;
	message.innerHTML += '<br>Type de fichier: '+totoalamaison.files[0].type ;
	message.innerHTML += '<br>Date dernière modification: '+totoalamaison.files[0].lastModified
	message.innerHTML += '<br><br>' ;
	
	console.log('Nice ?') ; 
	
	}
}

//on écoute si on déclenche un événement
totoalamaison.addEventListener('input',function(event) { 	
	
	//politesse pour la console qui adore ça...
	console.log('HELLO!') ;	
	//on envoie !
	getImage(event) ; 
	
	},false) ;

</script>
<!-- /////////////////////// Section Javascript /////////////////////// -->

</body>
</html>
